<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css" />
    <title>Speed Changer</title>
</head>

<body>
    <div class="container">
        <h1>Speed Changer</h1>
        <!-- Add a button to trigger the file selection -->
        <p>Upload your MP3:</p>
        <div class="upload-button">
            <input type="file" id="file">
            </br>

            <!-- start audio file -->

            <a id="audioLink" href="#" onclick="play(this)" data-value=""></a>
        </div>

        <!-- Audio player -->
        <div class="audio-player">
            <audio controls="controls" id="audio">
                <source id="audioSource" src="">
                </source>
            </audio>
        </div>

        <!-- Add a slider to adjust the speed -->
        <div class="slider-container">
            <input id="speed-slider" type="range" min="50" max="150" value="100">
            <div id="audiospeed">1</div>
        </div>

    </div>

    <script>

        //declare elements as vars

        var audioUpload = document.getElementById("file");
        var audioLink = document.getElementById('audioLink');
        var audioSource = document.getElementById("audioSource");
        var audioControl = document.getElementById('audio');

        //attach event listener to audioUpload input
        audioUpload.addEventListener("change", function () {
            uploadAudio(this);
        });

        //function that will upload audio
        function uploadAudio(input) {
            var reader;
            if (input.files && input.files[0]) {
                reader = new FileReader();
                reader.onload = function (e) {
                    audioLink.setAttribute('data-value', e.target.result);
                    audioLink.innerHTML = "Click to Play"
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        //function that will play audio after clicking link
        function play(element) {
            audioSource.src = element.getAttribute('data-value');
            audioControl.load();
            audioControl.play();
        };
        // Get a reference to the audio element
        const audio = document.getElementById('audio');

        // Get a reference to the speed slider
        const speedSlider = document.getElementById('speed-slider');

        // Bind an input event listener to the speed slider
        speedSlider.addEventListener('input', function () {
            // Set the playback rate of the audio
            audio.playbackRate = (this.value / 100);
            document.getElementById("audiospeed").innerHTML = audio.playbackRate;
            document.getElementById("audiospeed").style.textAlign = "center";
        });
    </script>

</body>


</html>